<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

  <title>Homework 2 - Dataset and Distribution</title>

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
  <script>hljs.highlightAll();</script>
  
  <style>
    body {
      margin: 0;
      font-family: 'Open Sans', Calibri, sans-serif;
      background: linear-gradient(135deg, #e9efff, #f9fbff);
      color: #000; 
    }

    h2, h3 {
      color: #1a237e; 
    }

    header {
      background: linear-gradient(90deg, #3a3a3a, #1f1f1f);
      color: #ffffff;
      text-align: center;
      padding: 80px 20px 60px 20px;
    }
    
    header h1 {
      font-size: 2.8em;
      font-weight: 700;
      margin-bottom: 10px;
      color: #ffffff;
    }
    
    header p {
      font-size: 1.2em;
      color: #e0e0e0;
      margin-top: 0;
    }


    main {
      max-width: 1100px; 
      margin: 40px auto;
      background: white;
      border-radius: 12px;
      padding: 50px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    section {
      margin-bottom: 50px;
    }

    section h2 {
      border-left: 5px solid #1a73e8;
      padding-left: 10px;
      font-size: 1.4em;
    }

    #cipher, #decrypt { text-align: left; }

    #cipher textarea,
    #decrypt textarea,
    #cipher .output-box,
    #decrypt .output-box,
    #countTable,
    #freqChart {
      display: block;
      margin: 15px auto;
    }

    #cipher textarea,
    #decrypt textarea,
    #cipher .output-box,
    #decrypt .output-box {
      width: 90%;
      max-width: 700px;
      border: 1px solid #ccc;
      border-radius: 8px;
      background: #f0f4ff;
      color: #000;
      font-size: 1em;
      padding: 12px;
      line-height: 1.5;
      text-align: left;
      white-space: pre-wrap;
      word-wrap: break-word;
    }

    #cipher h3, #decrypt h3 {
      color: #1a237e;
      margin-bottom: 10px;
      font-weight: 600;
      text-align: center;
    }

    #cipher h3[style*="Letter Frequency Distribution"],
    #cipher h4[style*="Letter Counts"] {
      text-align: center;
    }

    #tablesContainer {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin: 20px auto;
      max-width: 900px;
    }
    
    .letterTable {
      border-collapse: collapse;
      width: 340px;
      font-size: 0.9em;
      text-align: center;
      background: #fff;
      border-radius: 8px;
      overflow: hidden;
      border: 1px solid #ccc;
    }
    
    .letterTable th {
      background-color: #e3f2fd;
      color: #1a237e;
      font-weight: bold;
      padding: 8px;
    }
    
    .letterTable td {
      border: 1px solid #ccc;
      padding: 6px;
    }
    
    .letterTable tr:nth-child(even) {
      background-color: #f9fbff;
    }

    #freqChart {
      width: 95% !important;
      max-width: 900px;
      height: 420px !important;
      margin: 25px auto;
      display: block;
    }
    
    section ul {
      list-style-type: disc;
      padding-left: 25px;
    }
    
    section ul li {
      margin: 8px 0;
      font-size: 1em;
    }
    
    section ul li a {
      color: #1a73e8;
      text-decoration: none;
      transition: color 0.2s;
    }
    
    section ul li a:hover {
      text-decoration: underline;
    }
    
    section ul li a:visited {
      color: #1a73e8;
    }
  </style>
</head>

<body>
  <header>
    <h1>Homework 2</h1>
    <p>Explain the concept of dataset and distribution</p>
  </header>

  <main>
<!-- ======================
         SECTION 1 - Concept of Dataset and Distribution
         ====================== -->
    <section>
      <h2>Concept of Dataset and Distribution</h2>
      <p>
        A <strong>dataset</strong> is a structured collection of data, usually arranged in rows and columns. 
        Each <em>row</em> represents an observation or record, and each <em>column</em> represents a variable or attribute. 
        The values inside a dataset can be numerical (for example, age or score) or categorical (for example, course name or type). 
        Datasets can be stored in different formats, such as tables, spreadsheets, or databases, and are the foundation for any data analysis process.
      </p>
      
      <p>
        In statistics, a <strong>distribution</strong> describes how the values of a variable are spread across possible outcomes. 
        It shows the frequency or probability of each value occurring in the dataset. 
        Distributions can be <em>discrete</em> (where values are separate and countable, like days of the week) 
        or <em>continuous</em> (where values can vary over a continuous range, like temperature or time).
      </p>
      
      <p>
        A <strong>univariate distribution</strong> focuses on a single variable, analyzing how often each value appears. 
        It provides insights into the variability and concentration of data for that variable only, 
        without considering relationships with other variables. 
        For example, if a dataset contains a variable called <em>day</em> that can take values from 1 to 5 (representing Monday to Friday), 
        the univariate distribution of <em>day</em> tells us how many records correspond to each day.
      </p>
    </section>

    <!-- ======================================================
         SECTION 2 - Practical Implementation: Dataset Creation
         ======================================================-->
    <section id="dataset">
      <h2>Practical Implementation: Dataset Creation</h2>
    
      <p>
        The following SQL code was used to create the dataset <em>weeklySchedule</em>. 
        The table contains three variables (k = 3): <strong>idCourse</strong>, <strong>courseName</strong>, and <strong>day</strong>. 
        Each record represents a course and the corresponding day of the week it takes place, where days are coded from 1 (Monday) to 5 (Friday).
      </p>

      <pre><code class="language-sql">
        CREATE TABLE weeklySchedule (
          idCourse INTEGER,
          courseName TEXT,
          day INTEGER CHECK(day >= 1 AND day <= 5)
        );
        
        INSERT INTO weeklySchedule (idCourse, courseName, day) VALUES
        (1027171, 'Network Infrastructures', 1),
        (1022807, 'Distributed Systems', 1),
        (1047622, 'Cryptography', 2),
        (1022807, 'Distributed Systems', 3),
        (1055043, 'Statistics', 4),
        (1047622, 'Cryptography', 5),
        (1027171, 'Network Infrastructures', 5);
      </code></pre>

      <h2>Full Dataset</h2>
      <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 70%; text-align: center; margin: 20px auto;">
        <thead style="background-color: #e3f2fd;">
          <tr>
            <th>idCourse</th>
            <th>courseName</th>
            <th>day</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1027171</td><td>Network Infrastructures</td><td>1</td></tr>
          <tr><td>1022807</td><td>Distributed Systems</td><td>1</td></tr>
          <tr><td>1047622</td><td>Cryptography</td><td>2</td></tr>
          <tr><td>1022807</td><td>Distributed Systems</td><td>3</td></tr>
          <tr><td>1055043</td><td>Statistics</td><td>4</td></tr>
          <tr><td>1047622</td><td>Cryptography</td><td>5</td></tr>
          <tr><td>1027171</td><td>Network Infrastructures</td><td>5</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ======================
     SECTION 3 - Univariate Distribution
     ====================== -->
    <section id="distribution">
      <h2>Univariate Distribution</h2>
    
      <p>
        This section analyzes the dataset using two different univariate distributions:
        one based on <strong>courseName</strong> (how many times each course appears),
        and one based on <strong>day</strong> (how many courses occur on each day of the week).
      </p>

      <!-- Dropdown menu -->
      <label for="distributionSelect"><strong>Select variable:</strong></label>
      <select id="distributionSelect" style="margin: 10px; padding: 6px;">
        <option value="courseName">Distribution by courseName</option>
        <option value="day">Distribution by day</option>
      </select>

      <!-- SQL CODE: Distribution by courseName -->
      <div id="sql-courseName">
        <pre><code class="language-sql">
          SELECT 
            courseName,
            COUNT(*) AS occurrences
          FROM weeklySchedule
          GROUP BY courseName
          ORDER BY occurrences DESC;
        </code></pre>

        <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 70%; text-align: center; margin: 0 auto;">
          <thead style="background-color: #e3f2fd;">
            <tr>
              <th>courseName</th>
              <th>occurrences</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Network Infrastructures</td><td>2</td></tr>
            <tr><td>Distributed Systems</td><td>2</td></tr>
            <tr><td>Cryptography</td><td>2</td></tr>
            <tr><td>Statistics</td><td>1</td></tr>
          </tbody>
        </table>
      </div>

      <!-- SQL CODE: Distribution by day -->
      <div id="sql-day" style="display:none;">
        <pre><code class="language-sql">
          SELECT 
            CASE day
              WHEN 1 THEN 'Monday'
              WHEN 2 THEN 'Tuesday'
              WHEN 3 THEN 'Wednesday'
              WHEN 4 THEN 'Thursday'
              WHEN 5 THEN 'Friday'
            END AS weekday,
            COUNT(*) AS numberOfCourses
          FROM weeklySchedule
          GROUP BY day
          ORDER BY day;
        </code></pre>

        <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 60%; text-align: center; margin: 0 auto;">
          <thead style="background-color: #e3f2fd;">
            <tr>
              <th>weekday</th>
              <th>numberOfCourses</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Monday</td><td>2</td></tr>
            <tr><td>Tuesday</td><td>1</td></tr>
            <tr><td>Wednesday</td><td>1</td></tr>
            <tr><td>Thursday</td><td>1</td></tr>
            <tr><td>Friday</td><td>2</td></tr>
          </tbody>
        </table>
      </div>

      <!-- JavaScript for switching between distributions -->
      <script>
        const select = document.getElementById('distributionSelect');
        const sqlCourse = document.getElementById('sql-courseName');
        const sqlDay = document.getElementById('sql-day');
    
        select.addEventListener('change', function() {
          if (this.value === 'courseName') {
            sqlCourse.style.display = 'block';
            sqlDay.style.display = 'none';
          } else {
            sqlCourse.style.display = 'none';
            sqlDay.style.display = 'block';
          }
        });
      </script>
    </section>
    
    <section id="cipher">
      <h2>Interactive Caesar Cipher</h2>
      <p>
        Type your text below and choose a shift (1–25) to encrypt or decrypt it.  
        You can visualize the <strong>letter frequency distribution</strong> before and after encryption.
      </p>

      <div style="text-align:center; margin:30px 0;">
        <label for="userText"><strong>Enter your text:</strong></label><br>
        <textarea id="userText" rows="5" placeholder="Type your text here..."></textarea><br><br>

        <label for="shiftValue"><strong>Shift (1–25):</strong></label>
        <input type="number" id="shiftValue" min="1" max="25" value="3" style="width:60px; text-align:center;">

        <button id="encryptBtn" style="padding:6px 12px; background:#1a73e8; color:white; border:none; border-radius:6px; cursor:pointer;">
          Encrypt
        </button>
      </div>

      <div style="text-align:center;">
        <h3>Encrypted Text</h3>
        <div id="encryptedOutput" class="output-box"></div>
      </div>

      <h3 style="margin-top:40px;">Letter Frequency Distribution</h3>

      <div style="text-align:center; margin-bottom:15px;">
        <label for="viewSelect"><strong>View:</strong></label>
        <select id="viewSelect" style="margin-left:8px; padding:4px 8px;">
          <option value="before">Before Encryption</option>
          <option value="after">After Encryption</option>
          <option value="both" selected>Compare Both</option>
        </select>
      </div>

      <canvas id="freqChart"></canvas>

      <h4 style="margin-top:30px; text-align:center;">Letter Counts</h4>
      <div id="tablesContainer">
        <table class="letterTable" id="countTableLeft">
          <thead>
            <tr>
              <th>Letter</th>
              <th>Orig. Count</th>
              <th>Orig. %</th>
              <th>Cipher Count</th>
              <th>Cipher %</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      
        <table class="letterTable" id="countTableRight">
          <thead>
            <tr>
              <th>Letter</th>
              <th>Orig. Count</th>
              <th>Orig. %</th>
              <th>Cipher Count</th>
              <th>Cipher %</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>
    </section>

    <section id="decrypt" style="margin-top:60px;">
      <h2>Caesar Cipher Decryption</h2>
      <p>
        In this section, you can decrypt an encrypted message using a manual or automatic approach.  
        Choose a shift value or let the system detect it automatically through <em>English letter frequency analysis</em>.
      </p>

      <div style="text-align:center; margin:30px 0;">
        <label for="cipherText"><strong>Enter encrypted text:</strong></label><br>
        <textarea id="cipherText" rows="5" placeholder="Paste or type the encrypted message here..."></textarea><br><br>

        <label for="decryptShift"><strong>Shift (1–25):</strong></label>
        <input type="number" id="decryptShift" min="1" max="25" value="3" style="width:60px; text-align:center;">

        <button id="manualDecryptBtn" style="padding:6px 12px; background:#f57c00; color:white; border:none; border-radius:6px; cursor:pointer;">
          Manual Decrypt
        </button>

        <button id="autoDecryptBtn" style="padding:6px 12px; background:#43a047; color:white; border:none; border-radius:6px; cursor:pointer; margin-left:8px;">
          Auto Detect
        </button>
      </div>

      <div style="text-align:center;">
        <h3>Decrypted Message</h3>
        <div id="decryptOutput" class="output-box"></div>
      </div>
    </section>

    <section id="conclusions" style="margin-top:60px;">
      <h2>Conclusions</h2>
      <p>
        Through this assignment, we explored the concept of datasets and univariate distributions, 
        understanding how data can be organized and analyzed using both SQL and visualization techniques.  
        The practical implementation with the Caesar cipher provided a hands-on example of how statistical 
        tools, such as frequency distributions, can be applied to cryptographic analysis.
      </p>
    </section>

    <section>
      <!-- NOTE: Add your references here -->
      <h2>Sources</h2>
      <ul>
        <li><a href="https://en.wikipedia.org/wiki/Data_set" target="_blank">Wikipedia – Dataset</a></li>
        <li><a href="https://en.wikipedia.org/wiki/Univariate_distribution/" target="_blank">Wikipedia – Univariate Distribution</a></li>
        <li><a href="https://www.geeksforgeeks.org/what-is-dataset/" target="_blank">GeeksforGeeks – What is a Dataset</a></li>
      </ul>
    </section>

    <a href="../../index.html" class="back">← Back to Home</a>
  </main>
  <footer>
    <p>© 2025 - Domenico Sarno | Homework 2 - 15th October</p>
  </footer>

  <!-- ================================
       SCRIPT - Caesar Cipher + Chart
       ================================ -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      function caesarShift(text, shift, decrypt=false) {
        const lower = 'abcdefghijklmnopqrstuvwxyz';
        const upper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let result = '';
        if (decrypt) shift = 26 - shift;
        for (let char of text) {
          if (lower.includes(char)) result += lower[(lower.indexOf(char) + shift) % 26];
          else if (upper.includes(char)) result += upper[(upper.indexOf(char) + shift) % 26];
          else result += char;
        }
        return result;
      }

      function letterFrequencyPercent(text) {
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const freq = {};
        for (let l of alphabet) freq[l] = 0;
        let total = 0;
        for (let c of text.toUpperCase()) {
          if (alphabet.includes(c)) { freq[c]++; total++; }
        }
        for (let l of alphabet) freq[l] = total ? (freq[l] / total * 100).toFixed(2) : 0;
        return freq;
      }

      function letterFrequencyCount(text) {
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        const freq = {};
        for (let l of alphabet) freq[l] = 0;
        for (let c of text.toUpperCase()) if (alphabet.includes(c)) freq[c]++;
        return freq;
      }

      const ctx = document.getElementById('freqChart').getContext('2d');
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
      const freqChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: letters,
          datasets: [
            { label: 'Before Encryption (%)', data: [], backgroundColor: 'rgba(66,133,244,0.6)', borderColor: '#1a73e8', borderWidth: 1 },
            { label: 'After Encryption (%)', data: [], backgroundColor: 'rgba(255,152,0,0.6)', borderColor: '#f57c00', borderWidth: 1 }
          ]
        },
        options: {
          scales: { y: { beginAtZero: true, title: { display: true, text: 'Frequency (%)' } } },
          plugins: { legend: { position: 'bottom' } }
        }
      });

      function updateChartAndTable(beforeText, afterText, viewMode) {
        const freqBefore = letterFrequencyPercent(beforeText);
        const freqAfter = letterFrequencyPercent(afterText);
        const countBefore = letterFrequencyCount(beforeText);
        const countAfter = letterFrequencyCount(afterText);
      
        const beforePerc = letters.map(l => freqBefore[l]);
        const afterPerc = letters.map(l => freqAfter[l]);
      
        // Aggiorna il grafico
        freqChart.data.datasets[0].data = (viewMode === 'after') ? [] : beforePerc;
        freqChart.data.datasets[1].data = (viewMode === 'before') ? [] : afterPerc;
        freqChart.update();
      
        // Riempie le due tabelle (A–L e M–Z)
        const tbodyLeft = document.querySelector("#countTableLeft tbody");
        const tbodyRight = document.querySelector("#countTableRight tbody");
        tbodyLeft.innerHTML = "";
        tbodyRight.innerHTML = "";
      
        letters.forEach((l, idx) => {
          const row = `<tr>
            <td>${l}</td>
            <td>${countBefore[l]}</td>
            <td>${freqBefore[l]}%</td>
            <td>${countAfter[l]}</td>
            <td>${freqAfter[l]}%</td>
          </tr>`;
          if (idx < 13) tbodyLeft.insertAdjacentHTML('beforeend', row); // A–M
          else tbodyRight.insertAdjacentHTML('beforeend', row); // N–Z
        });
      }

      const textInput = document.getElementById('userText');
      const shiftInput = document.getElementById('shiftValue');
      const outputDiv = document.getElementById('encryptedOutput');
      const viewSelect = document.getElementById('viewSelect');

      document.getElementById('encryptBtn').addEventListener('click', () => {
        const text = textInput.value;
        if (!text.trim()) return alert("Please enter text first!");
        const shift = parseInt(shiftInput.value);
        const encrypted = caesarShift(text, shift, false);
        outputDiv.innerText = encrypted;
        updateChartAndTable(text, encrypted, viewSelect.value);
      });

      viewSelect.addEventListener('change', () => {
        updateChartAndTable(textInput.value, outputDiv.innerText, viewSelect.value);
      });

      document.getElementById('manualDecryptBtn').addEventListener('click', () => {
        const text = document.getElementById('cipherText').value;
        const shift = parseInt(document.getElementById('decryptShift').value);
        if (!text.trim()) return alert('Please enter a text to decrypt!');
        const decrypted = caesarShift(text, shift, true);
        document.getElementById('decryptOutput').innerText = decrypted;
      });

      const englishFreq = { E: 12.7, T: 9.06, A: 8.17, O: 7.51, I: 6.97, N: 6.75, S: 6.33,
        H: 6.09, R: 5.99, D: 4.25, L: 4.03, C: 2.78, U: 2.76, M: 2.41, W: 2.36, F: 2.23,
        G: 2.02, Y: 1.97, P: 1.93, B: 1.49, V: 0.98, K: 0.77, J: 0.15, X: 0.15, Q: 0.10, Z: 0.07 };

      function detectShift(text) {
        let bestShift = 0, bestScore = Infinity;
        for (let shift = 1; shift < 26; shift++) {
          const decrypted = caesarShift(text, shift, true);
          const freq = letterFrequencyPercent(decrypted);
          let score = 0;
          for (let l in englishFreq) score += Math.abs(englishFreq[l] - freq[l]);
          if (score < bestScore) { bestScore = score; bestShift = shift; }
        }
        return bestShift;
      }

      document.getElementById('autoDecryptBtn').addEventListener('click', () => {
        const text = document.getElementById('cipherText').value;
        if (!text.trim()) return alert('Please enter a text to decrypt!');
        const best = detectShift(text);
        const decrypted = caesarShift(text, best, true);
        document.getElementById('decryptOutput').innerText = `Best detected shift: ${best}\n\nDecrypted message:\n${decrypted}`;
      });
    });
  </script>
</body>
</html>
