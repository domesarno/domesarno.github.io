<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">

  <title>Homework 2 - Dataset and Distribution</title>

  <link rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/sql.min.js"></script>
  <script>hljs.highlightAll();</script>
  
  <style>
    
    pre {
      background-color: #1e1e1e;
      color: #fff;
      padding: 15px;
      border-radius: 8px;
      overflow-x: auto;
      font-size: 0.95em;
    }

    body {
      margin: 0;
      font-family: 'Open Sans', Calibri, 'Trebuchet MS', sans-serif;
      background: linear-gradient(135deg, #e9efff, #f9fbff);
      color: #000; 
    }

    h1, h2, h3 {
      color: #1a237e; 
    }

    a {
      color: #1a73e8;
      text-decoration: none;
      transition: 0.3s;
    }

    a:hover {
      text-decoration: underline;
    }

    /* ---------- HEADER ---------- */
    header {
      background: linear-gradient(90deg, #3a3a3a, #1f1f1f);
      color: white;
      text-align: center;
      padding: 60px 20px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.2);
    }

    header h1 {
      margin: 0;
      font-size: 2.5em;
      color: white;
    }

    header p {
      margin-top: 10px;
      font-size: 1.2em;
      opacity: 0.9;
    }

    /* ---------- MAIN CONTENT ---------- */
    main {
      max-width: 1100px; 
      margin: 40px auto;
      background: white;
      border-radius: 12px;
      padding: 50px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    }

    section {
      margin-bottom: 50px;
    }

    section h2 {
      border-left: 5px solid #1a73e8;
      padding-left: 10px;
      font-size: 1.4em;
    }

    footer {
      text-align: center;
      padding: 30px;
      color: #555;
      font-size: 0.9em;
      border-top: 1px solid #ccc;
      margin-top: 40px;
    }

    .back {
      display: inline-block;
      margin-top: 20px;
      color: #333;
    }

    #cipher textarea, #decrypt textarea {
      width: 90%;
      max-width: 700px; /*limite max*/
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 10px;
      font-size: 1em;
      font-family: 'Open Sans', sans-serif;
      resize: vertical; /*espansione solo verticale*/
    }

    #freqTableContainer table {
      border: 1px solid #ccc;
      border-radius: 8px;
      overflow: hidden;
    }
    
    #freqTableContainer th, #freqTableContainer td {
      border: 1px solid #ddd;
      padding: 6px 10px;
    }
    
    #freqTableContainer tbody tr:nth-child(even) {
      background-color: #f9f9f9;
    }
  </style>
</head>

<body>

  <header>
    <h1>Homework 2</h1>
    <p>Explain the concept of dataset and distribution</p>
  </header>

  <main>

    <!-- ======================
         SECTION 1
         ====================== -->
    <section>
      <h2>Concept of Dataset and Distribution</h2>
      <p>
        A <strong>dataset</strong> is a structured collection of data, usually arranged in rows and columns. 
        Each <em>row</em> represents an observation or record, and each <em>column</em> represents a variable or attribute. 
        The values inside a dataset can be numerical (for example, age or score) or categorical (for example, course name or type). 
        Datasets can be stored in different formats, such as tables, spreadsheets, or databases, and are the foundation for any data analysis process.
      </p>
      
      <p>
        In statistics, a <strong>distribution</strong> describes how the values of a variable are spread across possible outcomes. 
        It shows the frequency or probability of each value occurring in the dataset. 
        Distributions can be <em>discrete</em> (where values are separate and countable, like days of the week) 
        or <em>continuous</em> (where values can vary over a continuous range, like temperature or time).
      </p>
      
      <p>
        A <strong>univariate distribution</strong> focuses on a single variable, analyzing how often each value appears. 
        It provides insights into the variability and concentration of data for that variable only, 
        without considering relationships with other variables. 
        For example, if a dataset contains a variable called <em>day</em> that can take values from 1 to 5 (representing Monday to Friday), 
        the univariate distribution of <em>day</em> tells us how many records correspond to each day.
      </p>
    </section>

    <!-- ======================
         SECTION 2 
         ====================== -->
    <section id="dataset">
      <h2>Practical Implementation: Dataset Creation</h2>
    
      <p>
        The following SQL code was used to create the dataset <em>weeklySchedule</em>. 
        The table contains three variables (k = 3): <strong>idCourse</strong>, <strong>courseName</strong>, and <strong>day</strong>. 
        Each record represents a course and the corresponding day of the week it takes place, where days are coded from 1 (Monday) to 5 (Friday).
      </p>

      <pre><code class="language-sql">
        CREATE TABLE weeklySchedule (
          idCourse INTEGER,
          courseName TEXT,
          day INTEGER CHECK(day >= 1 AND day <= 5)
        );
        
        INSERT INTO weeklySchedule (idCourse, courseName, day) VALUES
        (1027171, 'Network Infrastructures', 1),
        (1022807, 'Distributed Systems', 1),
        (1047622, 'Cryptography', 2),
        (1022807, 'Distributed Systems', 3),
        (1055043, 'Statistics', 4),
        (1047622, 'Cryptography', 5),
        (1027171, 'Network Infrastructures', 5);
      </code></pre>

      <h2>Full Dataset</h2>
      <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 70%; text-align: center; margin: 20px auto;">
        <thead style="background-color: #e3f2fd;">
          <tr>
            <th>idCourse</th>
            <th>courseName</th>
            <th>day</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>1027171</td><td>Network Infrastructures</td><td>1</td></tr>
          <tr><td>1022807</td><td>Distributed Systems</td><td>1</td></tr>
          <tr><td>1047622</td><td>Cryptography</td><td>2</td></tr>
          <tr><td>1022807</td><td>Distributed Systems</td><td>3</td></tr>
          <tr><td>1055043</td><td>Statistics</td><td>4</td></tr>
          <tr><td>1047622</td><td>Cryptography</td><td>5</td></tr>
          <tr><td>1027171</td><td>Network Infrastructures</td><td>5</td></tr>
        </tbody>
      </table>
    </section>

    <!-- ======================
     SECTION 3 
     ====================== -->
    <section id="distribution">
      <h2>Univariate Distribution</h2>
    
      <p>
        This section analyzes the dataset using two different univariate distributions:
        one based on <strong>courseName</strong> (how many times each course appears),
        and one based on <strong>day</strong> (how many courses occur on each day of the week).
      </p>

      <!-- Dropdown menu -->
      <label for="distributionSelect"><strong>Select variable:</strong></label>
      <select id="distributionSelect" style="margin: 10px; padding: 6px;">
        <option value="courseName">Distribution by courseName</option>
        <option value="day">Distribution by day</option>
      </select>

      <!-- SQL CODE: Distribution by courseName -->
      <div id="sql-courseName">
        <pre><code class="language-sql">
          SELECT 
            courseName,
            COUNT(*) AS occurrences
          FROM weeklySchedule
          GROUP BY courseName
          ORDER BY occurrences DESC;
        </code></pre>

        <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 70%; text-align: center; margin: 0 auto;">
          <thead style="background-color: #e3f2fd;">
            <tr>
              <th>courseName</th>
              <th>occurrences</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Network Infrastructures</td><td>2</td></tr>
            <tr><td>Distributed Systems</td><td>2</td></tr>
            <tr><td>Cryptography</td><td>2</td></tr>
            <tr><td>Statistics</td><td>1</td></tr>
          </tbody>
        </table>
      </div>

      <!-- SQL CODE: Distribution by day -->
      <div id="sql-day" style="display:none;">
        <pre><code class="language-sql">
          SELECT 
            CASE day
              WHEN 1 THEN 'Monday'
              WHEN 2 THEN 'Tuesday'
              WHEN 3 THEN 'Wednesday'
              WHEN 4 THEN 'Thursday'
              WHEN 5 THEN 'Friday'
            END AS weekday,
            COUNT(*) AS numberOfCourses
          FROM weeklySchedule
          GROUP BY day
          ORDER BY day;
        </code></pre>

        <table border="1" cellspacing="0" cellpadding="8" style="border-collapse: collapse; width: 60%; text-align: center; margin: 0 auto;">
          <thead style="background-color: #e3f2fd;">
            <tr>
              <th>weekday</th>
              <th>numberOfCourses</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>Monday</td><td>2</td></tr>
            <tr><td>Tuesday</td><td>1</td></tr>
            <tr><td>Wednesday</td><td>1</td></tr>
            <tr><td>Thursday</td><td>1</td></tr>
            <tr><td>Friday</td><td>2</td></tr>
          </tbody>
        </table>
      </div>

      <!-- JavaScript for switching between distributions -->
      <script>
        const select = document.getElementById('distributionSelect');
        const sqlCourse = document.getElementById('sql-courseName');
        const sqlDay = document.getElementById('sql-day');
    
        select.addEventListener('change', function() {
          if (this.value === 'courseName') {
            sqlCourse.style.display = 'block';
            sqlDay.style.display = 'none';
          } else {
            sqlCourse.style.display = 'none';
            sqlDay.style.display = 'block';
          }
        });
      </script>
    </section>

    <!-- ======================
         SECTION 4
         ====================== -->
    <section id="cipher">
      <h2>Interactive Caesar Cipher Encryption</h2>
    
      <p>
        In this section, you can enter your own text and encrypt it using a Caesar Cipher.  
        You can choose a shift value (1–25), and the tool will show the encrypted text and the frequency distribution of letters.
      </p>
    
      <div style="text-align:center; margin:30px 0;">
        <label for="userText"><strong>Enter your text:</strong></label><br>
        <textarea id="userText" rows="5" cols="60" placeholder="Type your text here..."></textarea><br><br>
    
        <label for="shiftValue"><strong>Choose shift (1–25):</strong></label>
        <input type="number" id="shiftValue" min="1" max="25" value="3" style="width:60px; text-align:center;">
        <button id="encryptBtn" style="margin-left:10px; padding:6px 12px; background:#1a73e8; color:white; border:none; border-radius:6px; cursor:pointer;">
          Encrypt
        </button>
      </div>
    
      <h3>Encrypted Text:</h3>
      <div id="encryptedOutput" style="background:#f0f4ff; padding:15px; border-radius:8px; min-height:40px; text-align:center; font-weight:bold; font-size:1.1em;"></div>
    
      <h3 style="margin-top:40px;">Letter Frequency Chart</h3>
      <canvas id="freqChart" width="600" height="300" style="margin:auto; display:block;"></canvas>
      <div id="freqTableContainer" style="margin-top:20px; text-align:center;"></div>
    </section>
    
    <!-- ======================
         SCRIPT - Caesar Cipher + Chart
         ====================== -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      // Caesar cipher function
      function caesarEncrypt(text, shift) {
        const alphabetLower = 'abcdefghijklmnopqrstuvwxyz';
        const alphabetUpper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let result = '';
    
        for (let char of text) {
          if (alphabetLower.includes(char)) {
            let newIndex = (alphabetLower.indexOf(char) + shift) % 26;
            result += alphabetLower[newIndex];
          } else if (alphabetUpper.includes(char)) {
            let newIndex = (alphabetUpper.indexOf(char) + shift) % 26;
            result += alphabetUpper[newIndex];
          } else {
            result += char;
          }
        }
        return result;
      }
    
      function letterFrequency(text) {
        const freq = {};
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        
        for (let letter of alphabet) {
          freq[letter] = 0;
        }
      
        for (let char of text.toUpperCase()) {
          if (alphabet.includes(char)) {
            freq[char]++;
          }
        }
        return freq;
      }
    
      // Initialize chart
      const ctx = document.getElementById('freqChart').getContext('2d');
      let freqChart = new Chart(ctx, {
        type: 'bar',
        data: {
          labels: [],
          datasets: [{
            label: 'Letter Frequency',
            data: [],
            backgroundColor: '#64b5f6',
            borderColor: '#1a73e8',
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            x: { title: { display: true, text: 'Letters' } },
            y: { title: { display: true, text: 'Count' }, beginAtZero: true }
          }
        }
      });
    
      // Main encryption + chart update
      document.getElementById('encryptBtn').addEventListener('click', () => {
        const text = document.getElementById('userText').value;
        const shift = parseInt(document.getElementById('shiftValue').value);
        if (!text.trim()) {
          alert('Please enter some text!');
          return;
        }
      
        const encrypted = caesarEncrypt(text, shift);
        document.getElementById('encryptedOutput').innerText = encrypted;
      
        // Calculate full alphabet frequencies
        const freq = letterFrequency(encrypted);
        const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
        const counts = letters.map(l => freq[l]);
      
        // Update chart
        freqChart.data.labels = letters;
        freqChart.data.datasets[0].data = counts;
        freqChart.update();
      
        // Create HTML table under the chart
        let tableHTML = "<table style='margin:20px auto; border-collapse:collapse; text-align:center;'>";
        tableHTML += "<thead style='background:#e3f2fd;'><tr><th>Letter</th><th>Count</th></tr></thead><tbody>";
        for (let i = 0; i < letters.length; i++) {
          tableHTML += `<tr><td>${letters[i]}</td><td>${counts[i]}</td></tr>`;
        }
        tableHTML += "</tbody></table>";
      
        document.getElementById('freqTableContainer').innerHTML = tableHTML;
      });
    </script>


    <script>
      // Decrypt a text by trying all 25 shifts
      function caesarDecryptAll(text) {
        const alphabetLower = 'abcdefghijklmnopqrstuvwxyz';
        const alphabetUpper = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let results = "";
    
        for (let shift = 1; shift < 26; shift++) {
          let decrypted = "";
          for (let char of text) {
            if (alphabetLower.includes(char)) {
              let newIndex = (alphabetLower.indexOf(char) - shift + 26) % 26;
              decrypted += alphabetLower[newIndex];
            } else if (alphabetUpper.includes(char)) {
              let newIndex = (alphabetUpper.indexOf(char) - shift + 26) % 26;
              decrypted += alphabetUpper[newIndex];
            } else {
              decrypted += char;
            }
          }
          results += `Shift ${shift}: ${decrypted}\n`;
        }
    
        return results;
      }
    
      // English letter frequency (percentages)
      const englishFreq = {
        E: 12.7, T: 9.06, A: 8.17, O: 7.51, I: 6.97, N: 6.75,
        S: 6.33, H: 6.09, R: 5.99, D: 4.25, L: 4.03, C: 2.78,
        U: 2.76, M: 2.41, W: 2.36, F: 2.23, G: 2.02, Y: 1.97,
        P: 1.93, B: 1.49, V: 0.98, K: 0.77, J: 0.15, X: 0.15,
        Q: 0.10, Z: 0.07
      };
    
      // Compute text frequency distribution
      function freqAnalysis(text) {
        const freq = {};
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let total = 0;
    
        for (let letter of alphabet) freq[letter] = 0;
    
        for (let ch of text.toUpperCase()) {
          if (alphabet.includes(ch)) {
            freq[ch]++;
            total++;
          }
        }
    
        // convert to percentage
        for (let letter of alphabet) {
          freq[letter] = (freq[letter] / total) * 100;
        }
    
        return freq;
      }
    
      // Compare a frequency map to English
      function compareFreq(textFreq) {
        let diff = 0;
        for (let letter in englishFreq) {
          const value = textFreq[letter] || 0;
          diff += Math.abs(englishFreq[letter] - value);
        }
        return diff;
      }
    
      // Try all shifts and pick one with smallest difference
      function autoDetectShift(text) {
        const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
        let bestShift = 0;
        let bestScore = Infinity;
    
        for (let shift = 1; shift < 26; shift++) {
          let decrypted = "";
          for (let ch of text.toUpperCase()) {
            if (alphabet.includes(ch)) {
              let newIndex = (alphabet.indexOf(ch) - shift + 26) % 26;
              decrypted += alphabet[newIndex];
            } else {
              decrypted += ch;
            }
          }
          const freq = freqAnalysis(decrypted);
          const score = compareFreq(freq);
    
          if (score < bestScore) {
            bestScore = score;
            bestShift = shift;
          }
        }
    
        return bestShift;
      }
    
      // Event handlers for buttons
      document.getElementById('bruteBtn').addEventListener('click', () => {
        const text = document.getElementById('cipherText').value;
        if (!text.trim()) return alert('Please enter a text to decrypt!');
        const output = caesarDecryptAll(text);
        document.getElementById('decryptOutput').innerText = output;
      });
    
      document.getElementById('autoBtn').addEventListener('click', () => {
        const text = document.getElementById('cipherText').value;
        if (!text.trim()) return alert('Please enter a text to decrypt!');
        const best = autoDetectShift(text);
        const result = caesarEncrypt(text, 26 - best);
        document.getElementById('decryptOutput').innerText =
          `Best detected shift: ${best}\n\nDecrypted message:\n${result}`;
      });
    </script>




    <!-- ======================
     SECTION 5 - Caesar Cipher Decryption
     ====================== -->
    <section id="decrypt">
      <h2>Caesar Cipher Decryption</h2>
    
      <p>
        In this section, you can decrypt an encrypted message.  
        You can either test all possible shifts (<strong>brute force</strong>),  
        or let the system <strong>automatically detect</strong> the most probable shift using
        <em>English letter frequency analysis</em>.
      </p>
    
      <div style="text-align:center; margin:30px 0;">
        <label for="cipherText"><strong>Enter encrypted text:</strong></label><br>
        <textarea id="cipherText" rows="5" placeholder="Paste or type the encrypted message here..."></textarea><br><br>
    
        <button id="bruteBtn" style="padding:6px 12px; background:#1a73e8; color:white; border:none; border-radius:6px; cursor:pointer;">
          Try All Shifts
        </button>
    
        <button id="autoBtn" style="padding:6px 12px; background:#43a047; color:white; border:none; border-radius:6px; cursor:pointer; margin-left:10px;">
          Auto Detect Shift
        </button>
      </div>
    
      <h3>Decryption Results:</h3>
      <div id="decryptOutput" style="background:#f0f4ff; padding:15px; border-radius:8px; min-height:60px; text-align:left; font-family:monospace; white-space:pre;"></div>
    </section>



    

    <section>
      <h2>Sources</h2>
      <p style="font-size: 0.9em; color: #666;">
        - <a href="https://en.wikipedia.org/wiki/Data_set" target="_blank">Wikipedia – Dataset</a><br>
        - <a href="https://en.wikipedia.org/wiki/Univariate_distribution" target="_blank">Wikipedia – Univariate Distribution</a><br>
        - <a href="https://www.geeksforgeeks.org/what-is-dataset/" target="_blank">GeeksforGeeks – What is a Dataset</a><br>
        - <a href="https://www.statisticshowto.com/univariate-distribution/" target="_blank">StatisticsHowTo – Univariate Distribution</a>
      </p>
    </section>

    <a href="../../index.html" class="back">← Back to Home</a>
  </main>

  <footer>
    <p>© 2025 - Domenico Sarno | Homework 2 - 15th October</p>
  </footer>

</body>
</html>
